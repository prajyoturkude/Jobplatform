(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1203:function(e,t,o){var content=o(1303);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(42).default)("56ef606a",content,!0,{sourceMap:!1})},1297:function(e,t,o){"use strict";var r={props:{value:{type:Boolean,default:!1}},data(){return{checked:this.value}},watch:{value(e){this.checked=e}},methods:{onChange(e){this.$emit("input",this.checked)}}},l=(o(1302),o(8)),component=Object(l.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"toggleSwitch"},[t("label",{class:e.checked?"toggleChecked":""},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.checked)?e._i(e.checked,null)>-1:e.checked},on:{change:[function(t){var o=e.checked,r=t.target,l=!!r.checked;if(Array.isArray(o)){var n=e._i(o,null);r.checked?n<0&&(e.checked=o.concat([null])):n>-1&&(e.checked=o.slice(0,n).concat(o.slice(n+1)))}else e.checked=l},e.onChange]}})])])}),[],!1,null,null,null);t.a=component.exports},1302:function(e,t,o){"use strict";o(1203)},1303:function(e,t,o){var r=o(41)(!1);r.push([e.i,".toggleSwitch label{display:block;position:relative;margin:0;cursor:pointer}.toggleSwitch label input[type='checkbox']{display:none}.toggleSwitch label:before{display:block;content:'' !important;width:36px;height:20px;background:#B4BAD6;border-radius:15px;border:none;margin:0;transition:0.22s background}.toggleSwitch label:after{content:'' !important;display:block;width:16px;height:16px;border-radius:15px;position:absolute;top:2px;left:2px;box-shadow:0 0 8px #8F95B3;background:#fff;transition:0.22s margin-left}.toggleSwitch label.toggleChecked:before{background:#24A8AF}.toggleSwitch label.toggleChecked:after{background:white;margin-left:calc(100% - 20px)}\n",""]),e.exports=r},1323:function(e,t,o){e.exports=o.p+"img/watermark.aec39ca.svg"},2499:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var r=o(5),l=(o(27),o(29),o(37),o(338));function n(e,t){var o=Object(l.debounce)(function(){var t=Object(r.a)((function*(t,o,r,l){try{t(yield e.bind(r)(...l))}catch(e){o(e)}}));return function(e,o,r,l){return t.apply(this,arguments)}}(),t);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Promise(((e,r)=>{o(e,r,this,t)}))}}},2523:function(e,t,o){"use strict";var r=o(5),l=o(11),n=(o(239),o(25),o(38),o(2848)),c=o(24),h=o.n(c),d=o(1520),m=o.n(d),y=o(1521),v=o.n(y),S=o(333),f=o.n(S),x=o(62),w=o.n(x),C=o(128),T=o.n(C),k=o(1206),P=o.n(k),H=o(1199),z=o(1188),O=o(1176),E=o(23),I=o(60),$=(o(37),o(2499)),j=o(2574),B=o.n(j),R=o(1207),N={colorsinspo:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={tab:e.tab,colors:e.colors.map((e=>e.hex)),brandPaletteId:e.selectedPalette?e.selectedPalette.id:null},{palette:r}=t;"re-color"!==o.tab&&(e.tab="re-color");var l=Object(R.b)(e.colors.map((e=>e.originalHex)),r.colors);return e.colors.forEach(((t,o)=>{e["fill".concat(t.element,"Color")](e.colors[o].originalHex,l[o]),e.colors[o].hex=l[o],e.colors[o].lastHex=l[o]})),e.$store.dispatch("brandPalettes/setSelected",null),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tab=t.tab,e.colors.forEach(((o,r)=>{e["fill".concat(o.element,"Color")](e.colors[r].originalHex,t.colors[r]),e.colors[r].hex=t.colors[r]})),e.$store.dispatch("brandPalettes/setSelected",t.brandPaletteId)}},brandPalette:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={brandPaletteId:e.selectedPalette?e.selectedPalette.id:null,colors:e.colors.map((e=>e.hex)),brandColorApplied:e.brandColorApplied},{palette:r}=t;e.$store.dispatch("brandPalettes/setSelected",r.id);var l=Object(R.b)(e.colors.map((e=>e.originalHex)),r.colors);return e.colors.forEach(((t,o)=>{e["fill".concat(t.element,"Color")](e.colors[o].originalHex,l[o]),e.colors[o].hex=l[o]})),e.brandColorApplied=!0,o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.$store.dispatch("brandPalettes/setSelected",t.brandPaletteId),e.colors.forEach(((o,r)=>{e["fill".concat(o.element,"Color")](e.colors[r].originalHex,t.colors[r]),e.colors[r].hex=t.colors[r]})),e.brandColorApplied=t.brandColorApplied}},resetBrandPalette:{execute(e){var t={brandPaletteId:e.selectedPalette?e.selectedPalette.id:null,brandColorApplied:e.brandColorApplied},o=B()(e.history,(e=>"brandPalette"===e.command));if(o){var r=o.prevState.colors;e.colors.forEach(((t,o)=>{e["fill".concat(t.element,"Color")](e.colors[o].originalHex,r[o]),e.colors[o].hex=r[o]})),e.$store.dispatch("brandPalettes/setSelected",null),e.brandColorApplied=!1}return t},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.$store.state.brandPalettes.palettes.find((e=>e.id===t.brandPaletteId));o&&e.execute({command:"brandPalette",state:{palette:o},options:{skipHistory:!0}})}},fillColor:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{color:o,index:r}=t,l={tab:e.tab,color:e.colors[r].hex,index:r,brandPaletteId:e.selectedPalette?e.selectedPalette.id:null};return e.tab="re-color",e["fill".concat(e.colors[r].element,"Color")](e.colors[r].originalHex,o.hex),e.colors[r].hex=o.hex,e.colors[r].lastHex=o.hex,e.$store.dispatch("brandPalettes/setSelected",null),l},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tab=t.tab,e["fill".concat(e.colors[t.index].element,"Color")](e.colors[t.index].originalHex,t.color),e.colors[t.index].hex=t.color,e.colors[t.index].lastHex=t.color,e.$store.dispatch("brandPalettes/setSelected",t.brandPaletteId)}},tab:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={showTileTab:e.showTileTab,tab:e.tab,colors:e.colors.map((e=>e.hex)),brandPaletteId:e.brandColorApplied&&e.selectedPalette?e.selectedPalette.id:null},{tab:r}=t;if(e.showTileTab=!1,e.tab===r)e.tab=null;else switch(e.tab=r,r){case"re-color":if(o.brandPaletteId){var l=e.$store.state.brandPalettes.palettes.find((p=>p.id===o.brandPaletteId));l&&e.execute({command:"brandPalette",state:{palette:l},options:{skipHistory:!0}}),e.$store.dispatch("brandPalettes/setSelected",o.brandPaletteId)}else e.execute({command:"reColor",state:{colors:e.colors.map((e=>e.lastHex))},options:{skipHistory:!0}});break;case"monochrome":e.execute({command:"monochrome",state:{hue:e.monochromeHue,showCustomSaturation:e.showCustomSaturation,saturation:e.monochromeSaturation},options:{skipHistory:!0}});break;case"grayTone":e.execute({command:"grayTone",state:{hue:e.grayToneHue,saturation:e.grayToneSaturation},options:{skipHistory:!0}})}return o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.showTileTab=t.showTileTab,e.tab=t.tab,e.tab){case"re-color":if(t.brandPaletteId){var o=e.$store.state.brandPalettes.palettes.find((p=>p.id===t.brandPaletteId));o&&e.execute({command:"brandPalette",state:{palette:o},options:{skipHistory:!0}}),e.$store.dispatch("brandPalettes/setSelected",t.brandPaletteId)}else e.execute({command:"reColor",state:{colors:t.colors},options:{skipHistory:!0}});break;case"monochrome":e.execute({command:"monochrome",state:{hue:e.monochromeHue,showCustomSaturation:e.showCustomSaturation,saturation:e.monochromeSaturation},options:{skipHistory:!0}});break;case"grayTone":e.execute({command:"grayTone",state:{hue:e.grayToneHue,saturation:e.grayToneSaturation},options:{skipHistory:!0}});break;case null:e.colors.forEach(((o,r)=>{e["fill".concat(o.element,"Color")](e.colors[r].originalHex,t.colors[r]),e.colors[r].hex=t.colors[r]}))}}},tileTab:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={tab:e.tab,showTileTab:e.showTileTab,tileType:e.tileType},{tab:r,showTileTab:l}=t;return e.tab=r,e.showTileTab=l,l&&"none"===e.tileType.name&&e.execute({command:"tileType",state:{tile:e.tile,tileType:e.tiles[1],tileBorderRadius:e.tileBorderRadius,iconSize:e.iconSize,tileSize:e.tileSize},options:{skipHistory:!0}}),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tab=t.tab,e.showTileTab=t.showTileTab,e.execute({command:"tileType",state:{tile:e.tile,tileType:t.tileType,tileBorderRadius:e.tileBorderRadius,iconSize:e.iconSize,tileSize:e.tileSize},options:{skipHistory:!0}})}},reColor:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.colors.forEach(((o,r)=>{e["fill".concat(o.element,"Color")](e.colors[r].originalHex,t.colors[r]),e.colors[r].hex=t.colors[r],e.colors[r].lastHex=t.colors[r]})),e.selectedPalette&&e.$store.dispatch("brandPalettes/setSelected",e.selectedPalette.id)},undo(){}},monochrome:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{hue:o,showCustomSaturation:r,saturation:l}=t,n={brandPaletteId:e.selectedPalette?e.selectedPalette.id:null,colors:e.colors.map((e=>e.hex)),hue:e.monochromeHue,saturation:e.monochromeSaturation,showCustomSaturation:r};e.monochromeHue=o,e.showCustomSaturation=r,r&&(e.monochromeSaturation=l);var c=Object(R.a)(e.colors.map((e=>e.lastHex)),o,r?l:null);return e.colors.forEach(((t,o)=>{e["fill".concat(t.element,"Color")](e.colors[o].originalHex,c[o]),e.colors[o].hex=c[o]})),n},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.monochromeHue=t.hue,e.showCustomSaturation=t.showCustomSaturation,t.showCustomSaturation&&(e.monochromeSaturation=t.saturation),e.colors.forEach(((o,r)=>{e["fill".concat(o.element,"Color")](e.colors[r].originalHex,t.colors[r]),e.colors[r].hex=t.colors[r]})),e.$store.dispatch("brandPalettes/setSelected",t.brandPaletteId)}},toggleMonochromeSaturation:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={showCustomSaturation:e.showCustomSaturation},{showCustomSaturation:r}=t;return e.showCustomSaturation=!r,e.execute({command:"monochrome",state:{hue:e.monochromeHue,showCustomSaturation:e.showCustomSaturation,saturation:e.showCustomSaturation?e.monochromeSaturation:null},options:{skipHistory:!0}}),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.showCustomSaturation=t.showCustomSaturation,e.execute({command:"monochrome",state:{hue:e.monochromeHue,showCustomSaturation:e.showCustomSaturation,saturation:e.showCustomSaturation?e.monochromeSaturation:null},options:{skipHistory:!0}})}},grayTone:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={brandPaletteId:e.selectedPalette?e.selectedPalette.id:null,colors:e.colors.map((e=>e.hex)),hue:e.grayToneHue,saturation:e.grayToneSaturation},{hue:r,saturation:l}=t;e.grayToneHue=r,e.grayToneSaturation=l;var n=Object(R.a)(e.colors.map((e=>e.lastHex)),e.grayToneHue,e.grayToneSaturation);return e.colors.forEach(((t,o)=>{e["fill".concat(t.element,"Color")](e.colors[o].originalHex,n[o]),e.colors[o].hex=n[o]})),e.$store.dispatch("brandPalettes/setSelected",null),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.grayToneHue=t.hue,e.grayToneSaturation=t.saturation,e.colors.forEach(((o,r)=>{e["fill".concat(o.element,"Color")](e.colors[r].originalHex,t.colors[r]),e.colors[r].hex=t.colors[r]})),e.$store.dispatch("brandPalettes/setSelected",t.brandPaletteId)}},tileType:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={tile:e.tile,tileType:e.tileType,iconSize:e.iconSize,tileSize:e.tileSize,tileBorderRadius:e.tileBorderRadius},{tileType:r}=t;return D(e,t),e.execute({command:"iconSize",state:{scale:"none"===r.name?1:r.icon},options:{skipHistory:!0}}),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tile&&e.tile.remove(),D(e,t),e.execute({command:"iconSize",state:{scale:"none"===t.tileType.name?1:t.iconSize},options:{skipHistory:!0}})}},iconSize:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={scale:e.iconSize},{scale:r}=t;return e.iconSize=Number(r),e.icon&&e.icon.transform({scale:r}),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.iconSize=t.scale,e.icon&&e.icon.transform({scale:t.scale})}},tileSize:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={scale:e.tileSize},{scale:r}=t;return e.tileSize=Number(r),e.tile&&e.tile.transform({scale:r}),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tileSize=t.scale,e.tile&&e.tile.transform({scale:t.scale})}},tileBorderRadius:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={radius:e.tileBorderRadius},{radius:r}=t;return e.tileBorderRadius=r,A(e,{radius:r}),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tileBorderRadius=t.radius,A(e,{radius:t.radius})}},tileColor:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={color:e.tileColor},{color:r}=t;return e.tileColor=r,e.tile&&e.tile.fill(r),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.tileColor=t.color,e.tile&&e.tile.fill(t.color)}},deleteElement:{execute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={element:t.element,index:t.index,fillElements:t.fillElements};return t.element.remove(),o},undo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.draw.select(t.fillElements).members;o.splice(t.index,0,t.element);var svg=P()(e.icon.node.childNodes[0]);svg.clear(),o.forEach(((element,e)=>{0!==e&&element instanceof P.a.Element&&svg.add(element)}))}}},D=(e,t)=>{var{tileType:o,tileSize:r}=t;switch(e.tile&&e.tile.remove(),e.tileType=o,o.name){case"none":e.tile=null;break;case"square":e.tile=e.draw.rect(e.canvasWidth,e.canvasHeight).radius(e.tileBorderRadius);break;case"squircle":var l=e.canvasWidth,n=l/2,c=l-5;e.tile=e.draw.path("M ".concat(n,",0 C ").concat(5,",0 0,").concat(5," 0,").concat(n," 0,").concat(c," ").concat(5,",").concat(l," ").concat(n,",").concat(l," ").concat(c,",").concat(l," ").concat(l,",").concat(c," ").concat(l,",").concat(n," ").concat(l,",").concat(5," ").concat(c,",0 ").concat(n,",0 Z"));break;case"circle":e.tile=e.draw.circle(e.canvasWidth,e.canvasHeight);break;case"beacon":e.tile=e.draw.group(),e.tile.circle(e.canvasWidth,e.canvasHeight),e.tile.rect(e.canvasWidth/2+e.tileBorderRadius,e.canvasHeight/2+e.tileBorderRadius).move(e.canvasWidth/2-e.tileBorderRadius,e.canvasHeight/2-e.tileBorderRadius).radius(e.tileBorderRadius)}e.tile&&e.tile.back(),e.execute({command:"tileSize",state:{scale:r},options:{skipHistory:!0}}),e.tile&&e.tile.back().fill(e.tileColor).transform({scale:e.tileSize})},A=(e,t)=>{var{radius:o}=t;if(e.tileType)if("square"===e.tileType.name)e.tile.radius(o);else if("beacon"===e.tileType.name){e.tile.select("rect").members[0].size(e.canvasWidth/2+o,e.canvasHeight/2+o).move(e.canvasWidth/2-o,e.canvasHeight/2-o).radius(o)}};function W(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function _(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?W(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):W(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var F={data:()=>({history:[],position:-1,holdState:null,disableTimeTravel:!1}),mounted(){window.addEventListener("keydown",this.keyEventHandler)},destroyed(){window.removeEventListener("keydown",this.keyEventHandler)},computed:{unDoable(){return!!(!this.disableTimeTravel&&this.history.length&&this.position>=0)},reDoable(){return!!(!this.disableTimeTravel&&this.history.length&&this.position<this.history.length-1)}},methods:{keyEventHandler(e){(e.ctrlKey||e.metaKey)&&"KeyZ"===e.code&&(e.preventDefault(),e.shiftKey?(this.reDoable&&this.$analytics.track("editor",{action:"redo",via:"keyboard"}),this.redo()):(this.unDoable&&this.$analytics.track("editor",{action:"undo",via:"keyboard"}),this.undo()))},set(e){this.position<this.history.length-1&&(this.history=this.history.slice(0,this.position+1)),this.history.push(e),this.history.length>40&&this.history.splice(1,1),this.position=this.history.length-1},setLazy:Object($.a)((function(e){this.position<this.history.length-1&&(this.history=this.history.slice(0,this.position+1));var t=this.holdState;return this.history.push(_(_({},e),{},{prevState:t})),this.history.length>40&&this.history.splice(1,1),this.position=this.history.length-1,this.holdState=null,Promise.resolve(t)}),400),undo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.position>=0){var t=this.history[this.position];N[t.command].undo(this,t.prevState),e.silent||(this.position-=1)}},redo(){if(this.position<this.history.length-1){this.position+=1;var e=this.history[this.position];N[e.command].execute(this,e.state)}},execute(e){var{command:t,state:o={},options:r={}}=e;return new Promise((e=>{var l=N[t].execute(this,o);r.skipHistory||(r.lazy?(this.holdState||(this.holdState=l),this.setLazy({command:t,state:o}).then((t=>{e({state:o,prevState:t})}))):(this.set({command:t,state:o,prevState:l}),e({state:o,prevState:l})))}))},reset(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.resetTimeTravel(),this.$store.dispatch("brandPalettes/setSelected",null),this.$nextTick((()=>{e?this.initEditor(e):this.initSVG()}))},resetTimeTravel(){this.position=-1,this.history=[],this.resetData()}}};function G(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function L(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?G(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):G(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var M=["use","g","path","polyline","polygon","circle","rect","circle","ellipse"],K="fill",U="fill",V="data-name",J=["line","g","path","polygon","circle","rect","circle","ellipse"],Z=["stop"],X="stroke",Y="svgShape",Q={monochromeHue:200,monochromeSaturation:100,showCustomSaturation:!1,grayToneHue:200,grayToneSaturation:10,tileColor:"#87ddfd",tileBorderRadius:20,tileSize:.7916,iconSize:.4652,tab:null,showTileTab:!1};t.a={mixins:[I.a,F],data:()=>L({draw:null,colors:[],icon:null,tile:null,tileType:{name:"none"},original:null,originalContent:null,originalWidth:null,originalHeight:null,selectedColorIndex:-1,selectedElement:null,selectedElementIndex:null,delBtnPosition:null,loadPickerOnCanvas:!1,listenForClickOut:!1,pickerWidth:256,pickerId:"onCanvasColorPicker",showUploadOption:!0,tiles:[{name:"none",icon:1,shape:null},{name:"square",icon:.4652,shape:.7916},{name:"squircle",icon:.4652,shape:.7916},{name:"circle",icon:.4652,shape:.9167},{name:"beacon",icon:.4652,shape:.9167}]},Q),computed:{color:{get(){return-1!==this.selectedColorIndex?this.colors[this.selectedColorIndex].hex:"#FFF"},set(e){this.execute({command:"fillColor",state:{color:e,index:this.selectedColorIndex},options:{lazy:!0}}).then((e=>{e&&this.$analytics.track("editor",{location:"item-colors",action:"edit-color",prevColor:e.prevState.color,editedColor:e.state.color.hex})}))}},selectedPalette(){return this.$store.getters["brandPalettes/selectedPalette"]}},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown)},mounted(){document.addEventListener("keydown",this.onKeyDown)},watch:{selectedColorIndex(e){-1===e&&(this.selectedElement=null)}},methods:{init(e){var t=arguments,o=this;return Object(r.a)((function*(){var r=t.length>1&&void 0!==t[1]?t[1]:"initNew";o.showUploadOption=!1,o.isLoading=r;var l=null;try{l=yield h()(e,{withCredentials:!1})}catch(e){var title="This file is having issue. Please report us.";throw o.$root.$bvToast.toast(title,{title:title,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"}),o.$sentry.captureException({item_id:o.iconScoutItem?o.iconScoutItem.id:null,e:e}),new Error(title)}o.originalContent=l.data,o.original=yield Object(z.a)(o.originalContent),"fromSearch"===r&&o.resetTimeTravel(),o.initSVG()}))()},initEditor(content){var e=this;return Object(r.a)((function*(){e.originalContent=content,e.isLoading="initNew",e.tab=null,e.showTileTab=!1,e.showUploadOption=!1,e.original=yield Object(z.a)(content),e.initSVG()}))()},initSVG(){var e=this;this.draw&&this.draw.remove(),this.draw=P()(this.id),this.draw.size(this.canvasWidth,this.canvasHeight),this.icon=this.draw.group();var t=this.icon.svg(this.original);if(this.originalWidth=t.get(0).attr("width"),this.originalHeight=t.get(0).attr("height"),this.icon.select("svg").size(this.canvasWidth,this.canvasHeight),this.tileType=this.tiles[0],this.draw.each((function(){if(t!==this){var data=this.attr(V);data&&this.attr(V,v()(data))}}),!0),e.colors=[],this.draw.select(M).each((function(o){if(t!==this){var r=!1,l=this.attr("id");if(l&&"use"!==this.type){var c=e.draw.select("use");f()(c.members,(use=>{"#".concat(l)!==use.attr("xlink:href")||!use.attr(U)||"#000000"===use.attr(U).trim()&&"#000"===use.attr(U).trim()||(r=!0)}))}if(!r){var h=null;if("g"!==this.type&&"use"!==this.type||!this.attr(U)||"#000000"!==this.attr(U).trim()?this.attr(U)&&"#000000"!==this.attr(U).trim()?h=this.attr(U):this.style(K)?h=this.style(K):this.attr(X)&&"#000000"!==this.attr(X).trim()||(h="#000"):h="none",m()(h)){this.style(K,null),this.attr(U,h);var d=e.generateClassName(h);this.addClass(d),this.addClass(Y),-1===w()(e.colors,{originalHex:h})&&e.colors.push({hex:h,lastHex:h,originalHex:h,className:d,element:"Shape"}),this.click((function(){e.selectColor(h)}))}this.click((function(t){var r=/^#?([0-9A-F]{3}){1,2}$/i.test(this.attr(U));"g"!==this.type&&r&&(e.$analytics.track("editor",{route_path:e.$route.path,route_name:e.$route.name,location:"canvas",action:"select-element"}),e.selectedElement=this,e.loadPickerOnCanvas=!0,e.listenForClickOut=!0,e.selectedElementIndex=o,e.$nextTick((()=>{setTimeout((()=>{var o=document.getElementById("IconscoutIconEditor"),r=document.getElementById(e.pickerId);o&&r&&(Object(n.a)(o,r,{placement:"bottom",modifiers:[{name:"offset",options:{offset:[t.offsetX-(o.clientWidth-e.pickerWidth)/2,-(o.clientHeight-t.offsetY)]}},{name:"flip",enabled:!1}]}),e.delBtnPosition={x:e.pickerWidth+5,y:0})}),10)})))}))}}}),!0),this.draw.select(J).each((function(){if(t!==this){var o=null;if(this.attr(X)&&"#000000"!==this.attr(X).trim()&&(o=this.attr(X)),m()(o)){var r=e.generateStrokeClassName(o);this.addClass(r),this.addClass("svgStroke"),-1===w()(e.colors,{originalHex:o,element:"Stroke"})&&e.colors.push({hex:o,lastHex:o,originalHex:o,className:r,element:"Stroke"})}}})),this.draw.select(Z).each((function(){if(t!==this){var o;if(o=this.attr("stop-color"),m()(o)){this.style(K,null),this.attr("stop-color",o);var r=e.generateGradientClassName(o);this.addClass(r),this.addClass(Y),-1===w()(e.colors,{originalHex:o,element:"StopColor"})&&e.colors.push({hex:o,lastHex:o,originalHex:o,className:r,element:"StopColor"})}}})),!this.colors.length)throw this.resetData(),this.showUploadOption=!0,new Error("This file is not supported.");w()(this.colors,{element:"StopColor"})>-1&&this.$analytics.track("editor",{type:"gradient",url:window.location.href,itemId:this.iconScoutItem?this.iconScoutItem.id:null}),this.initWithBrandColor&&this.selectedPalette&&!this.selectedPalette.is_default&&this.onApplyBrandPalette(this.selectedPalette),this.tab="re-color",this.urlState&&(this.execute({command:"reColor",state:{colors:this.urlState.colors},options:{skipHistory:!0}}),this.monochromeHue=this.urlState.monochromeHue,this.monochromeSaturation=this.urlState.monochromeSaturation,this.showCustomSaturation=this.urlState.showCustomSaturation,this.grayToneHue=this.urlState.grayToneHue,this.grayToneSaturation=this.urlState.grayToneSaturation,this.tileColor=this.urlState.tileColor,this.tileBorderRadius=this.urlState.tileBorderRadius,this.tileSize=this.urlState.tileSize,this.iconSize=this.urlState.iconSize,this.tileType=this.urlState.tileType,this.urlState.tab&&this.execute({command:"tab",state:{tab:this.urlState.tab},options:{skipHistory:!0}}),this.tab=this.urlState.tab,this.showTileTab=this.urlState.showTileTab,this.execute({command:"tileType",state:{tile:this.tile,tileType:L(L({},this.urlState.tileType),{},{icon:this.urlState.iconSize}),tileBorderRadius:this.tileBorderRadius,iconSize:this.iconSize,tileSize:this.tileSize},options:{skipHistory:!0}}),this.urlState.downloadItem&&this.onDownload({format:this.urlState.downloadItem[0],size:this.urlState.downloadItem[1]})),this.showSearchSidebar&&this.$nextTick((()=>{this.showSearchSidebar=!1})),this.isLoading=null},generateClassName:e=>"color"+e.replace(/[\W+]/g,""),generateStrokeClassName:e=>"colorStroke"+e.replace(/[\W+]/g,""),generateGradientClassName:e=>"stopColor"+e.replace(/[\W+]/g,""),fillShapeColor(e,t){this.draw.select("."+this.generateClassName(e)).fill(t)},fillStrokeColor(e,t){this.draw.select("."+this.generateStrokeClassName(e)).stroke(t)},fillStopColorColor(e,t){this.draw.select("."+this.generateGradientClassName(e)).attr({"stop-color":t})},selectColor(e){this.selectedColorIndex=w()(this.colors,{originalHex:e})},resetData(){T()(Q,((e,t)=>{this[t]=Q[t]}))},onKeyDown(e){(this.$device.isMacOS?"Backspace"===e.key:"Delete"===e.key||"Del"===e.key)&&this.onRemoveSelectedElement("keyboard")},onRemoveSelectedElement(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"click";this.execute({command:"deleteElement",state:{element:this.selectedElement,index:this.selectedElementIndex,fillElements:M}}).then((t=>{t&&(this.selectedElement=null,this.loadPickerOnCanvas=!1,this.listenForClickOut=!1,this.$analytics.track("editor",{route_path:this.$route.path,route_name:this.$route.name,location:"canvas",action:"delete-element",data:{via:e}}))}))},onChangeTab(e){this.execute({command:"tab",state:{tab:e}})},onToggleTileTab(){this.execute({command:"tileTab",state:{tab:null,showTileTab:!this.showTileTab}})},onChangeTileType(e){this.execute({command:"tileType",state:{tile:this.tile,tileType:e,tileBorderRadius:this.tileBorderRadius,iconSize:this.iconSize,tileSize:this.tileSize}})},onChangeTileSize(e){this.execute({command:"tileSize",state:{scale:Number(e)},options:{lazy:!0}}).then((e=>{e&&this.$analytics.track("editor",{location:"add-tile",action:"edit-tile-size",scale:e.state.scale})}))},onChangeTileBorderRadius(e){this.execute({command:"tileBorderRadius",state:{radius:Number(e)},options:{lazy:!0}}).then((e=>{e&&this.$analytics.track("editor",{location:"add-tile",action:"edit-border-radius",radius:e.state.radius})}))},onChangeTileColor(e){this.execute({command:"tileColor",state:{color:e.color},options:{lazy:!0}}).then((t=>{t&&this.$analytics.track("editor",{location:"add-tile",action:"edit-tile-color",color:t.state.color,via:e.via})}))},onChangeIconSize(e){this.execute({command:"iconSize",state:{scale:Number(e)},options:{lazy:!0}}).then((e=>{e&&this.$analytics.track("editor",{location:"add-tile",action:"edit-icon-size",scale:e.state.scale})}))},onChangeMonochromeHue(e){this.execute({command:"monochrome",state:{hue:Number(e.hue),showCustomSaturation:this.showCustomSaturation,saturation:this.monochromeSaturation},options:{lazy:!0}}).then((t=>{t&&this.$analytics.track("editor",{location:"monochrome",action:"edit-hue",hue:t.state.hue,via:e.via})}))},onToggleCustomSaturation(){this.execute({command:"toggleMonochromeSaturation",state:{showCustomSaturation:this.showCustomSaturation}})},onChangeMonochromeSaturation(e){this.execute({command:"monochrome",state:{hue:this.monochromeHue,showCustomSaturation:this.showCustomSaturation,saturation:Number(e)},options:{lazy:!0}}).then((e=>{e&&this.$analytics.track("editor",{location:"monochrome",action:"edit-saturation",saturation:e.state.saturation})}))},onChangeGrayToneHue(e){this.execute({command:"grayTone",state:{hue:Number(e.hue),saturation:this.grayToneSaturation},options:{lazy:!0}}).then((t=>{t&&this.$analytics.track("editor",{location:"grayTone",action:"edit-hue",hue:t.state.hue,via:e.via})}))},onChangeGrayToneSaturation(e){this.execute({command:"grayTone",state:{hue:this.grayToneHue,saturation:Number(e)},options:{lazy:!0}}).then((e=>{e&&this.$analytics.track("editor",{location:"grayTone",action:"edit-saturation",saturation:e.state.saturation})}))},onApplyBrandPalette(e){this.execute({command:"brandPalette",state:{palette:e}})},onResetBrandColors(){this.execute({command:"resetBrandPalette"})},onApplyColorsinspo(e){this.history.length&&"colorsinspo"===this.history[this.history.length-1].command&&this.history[this.history.length-1].state.palette.id===e.id||this.execute({command:"colorsinspo",state:{palette:e}})},download(e,t,o){var l=arguments,n=this;return Object(r.a)((function*(){var r=l.length>3&&void 0!==l[3]?l[3]:0,c=l.length>4&&void 0!==l[4]?l[4]:null,d=l.length>5&&void 0!==l[5]?l[5]:"icon",m=l.length>6&&void 0!==l[6]&&l[6];try{var y=Object(E.c)("/api/v2/icon-editor"),v=yield h.a.post(y,{xml:e,name:t,format:o,width:r,height:r,item_id:c,asset:d,source:"web"});if(n.iconScoutItem&&!m&&Object(O.a)(L({uuid:n.iconScoutItem.uuid,format:o,licenseId:n.iconScoutItem.license_id,size:r},n.$store.getters["brandPalettes/selectedPalette"]&&{brandPaletteId:n.$store.getters["brandPalettes/selectedPalette"].id})),"base64"===o)return Object(H.a)(v.data.response.url);if(m)return v.data.response.url;window.location.href=v.data.response.download_url}catch(e){console.log(e)}}))()}}}}}]);
